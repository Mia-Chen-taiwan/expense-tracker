<div class="container mt-5" style="width: 400px;">
<form action="/records/{{ record._id }}?_method=PUT" method="POST">

  <div class="text-center">
    <h3 style="font-weight: bold;">編輯支出紀錄</h3>
  </div>

  <div class="form-group">
    <label>名稱 :</label>
    <input required class="form-control" style="display: inline;" type="text" name="name" value="{{ record.name }}">
  </div>

  <div class="form-group">
    <label>日期 :</label>
    <div id="datepicker" class="input-group date" data-date-format="mm-dd-yyyy">
    <input type="date" class="form-control new-date" id="date" name="date" placeholder="日期" value="{{ record.date }}"
      autocomplete="on" required>
  </div>

  <div class="form-group mt-3">
    <label>類別 :</label>
    <select class="form-control" name="category">
      <option value="{{ record.category }}">-{{ record.category }}-</option>
      {{#each categories}}
      <option value="{{ this.name }}">{{ this.name }}</option>
      {{/each}}
    </select>
  </div>

  <div class="form-group mb-4">
    <label>金額 :</label>
    <input required class="form-control" style="display: inline;" type="text" placeholder="NT$" name="amount" value="{{ record.amount }}">
  </div>

  <div class="text-center">
    <button type="submit" class="btn btn-success">
      <i class="fas fa-check mr-2"></i>儲存
    </button>
  </div>

</form>
<form action="/records/{{ record._id }}?_method=DELETE" method="POST" onsubmit="return confirm('確定要刪除這筆紀錄嗎？')">
  <div class="text-center mt-3">
    <button class="btn btn-danger" type="submit">
      <i class="fas fa-trash mr-2"></i>刪除
    </button>
  </div>
</form>
</div>

<script>
  const dateValue = document.querySelector('.new-date')
  const now = new Date()
  dateValue.value = now.toISOString().slice(0, 10)
</script>